---
title: "NSSplitViewController„Åß3panes„Éë„Çø„Éº„É≥„ÇíÂÆüË£Ö„Åô„Çã"
emoji: "üìù"
type: "tech" # tech: ÊäÄË°ìË®ò‰∫ã / idea: „Ç¢„Ç§„Éá„Ç¢
topics: [Cocoa, AppKit, NSSplitViewController]
published: true
---

UIKit„Åß„ÅØUISplitViewController„Çí‰Ωø„Å£„Å¶2„ÇÇ„Åó„Åè„ÅØ3„Ç´„É©„É†„ÅÆUI„ÇíÂÆüË£Ö„Åó„Åæ„Åô„Åå„ÄÅiPad„ÅßÊúÄÈÅ©„Å™„ÅÆ„ÅØ„ÅÇ„Åè„Åæ„Åßprimary-(supplementary)-secondary„ÅÆ„Éë„Çø„Éº„É≥„Åß„ÅÇ„Å£„Å¶„ÄÅinspector pane„ÅØ„Çà„ÇäÊã°ÂºµÊÄß„ÅÆÈ´ò„ÅÑmac appÁâπÊúâ„ÅÆ„Éë„Çø„Éº„É≥„Åß„Åô„ÄÇ

„Åì„ÅÆË®ò‰∫ã„Åß„ÅØ`NSSplitViewController`„ÇíÂà©Áî®„Åó„Å¶„ÄÅinspector pane„Çí‰º¥„Å£„Åü3panes„Éë„Çø„Éº„É≥„ÅÆÂÆüË£ÖÊñπÊ≥ï„ÇíÈ†Ü„Çí„Åä„Å£„Å¶Ëß£Ë™¨„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

# 1. „Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆ‰ΩúÊàê
„ÄåmacOS > App„Äç„ÅÆ„ÉÜ„É≥„Éó„É¨„Éº„Éà„ÇíÈÅ∏Êäû„Åó„ÄÅ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ

![„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà 2023-01-12 16.53.23.png](/images/6c78b72b9883c3/image1.webp)

„Åì„ÅÆË®ò‰∫ã„Åß„ÅØStoryboard„Å®AppKit„Çí‰Ωø„ÅÜ„ÅÆ„Åß„ÄÅInterface>Storyboard„Å®ÈÅ∏Êäû„Åó„Å¶‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
(‰ªä„ÅØCoreData„ÇÇUnitTest„ÇÇ„ÅÑ„Çâ„Å™„ÅÑ„ÅÆ„Åß„Ç™„Éó„Ç∑„Éß„É≥„ÅØÂ§ñ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ)

# 2. „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÈÖçÁΩÆ
Storyboard„ÇíÈñã„Åç„ÄÅÂàùÊúüÈÖçÁΩÆ„Åï„Çå„Å¶„ÅÑ„ÇãWindow Scene„Å®View Controller Scene„ÇíÁØÑÂõ≤ÈÅ∏Êäû„Åó„Å¶ÂâäÈô§„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ„Åù„Åó„Å¶„ÄÅcmd+shift+L„Åß„É©„Ç§„Éñ„É©„É™„ÇíÈñã„Åç„ÄÅ"Window Controller with Sidebar"„Å®„ÅÑ„ÅÜ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Çí„Éâ„É≠„ÉÉ„Éó„Åó„Åæ„Åô„ÄÇ„Éâ„É≠„ÉÉ„Éó„Åï„Çå„ÅüWindow Controller„ÅÆ"Is Initial Controller"„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ„ÇíÂÖ•„Çå„Å¶„Åä„Åç„Åæ„Åô„ÄÇ

![„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà 2023-01-12 17.02.59.png](/images/6c78b72b9883c3/image2.webp)

# 3. Toolbar„Å´„Ç¢„Ç§„ÉÜ„É†„ÇíËøΩÂä†„Åó„Å¶Â±ûÊÄß„ÇíË®≠ÂÆö
Storyboard‰∏ä„ÅßToolbar„Çí„ÇØ„É™„ÉÉ„ÇØ„Åô„Çã„Å®„Éë„Éç„É´„ÅåË°®Á§∫„Åï„Çå„Å¶„ÄÅÈÖçÁΩÆ„Åô„ÇãToolbarItem„ÇíÊ±∫„ÇÅ„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ"Default Toolbar Items ... drag in items from above"„Å®Êõ∏„ÅÑ„Å¶„ÅÇ„Çã„Å®„Åì„Çç„Å´ÂÖ•„Çå„Åü„ÇÇ„ÅÆ„Åå„Ç¢„Éó„É™„ÅÆËµ∑ÂãïÊôÇ„Å´„Éá„Éï„Ç©„É´„Éà„ÅßË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ

„Åæ„Åö„ÅØflexible space‰ª•Â§ñ„ÅÆ„Ç¢„Ç§„ÉÜ„É†„Çí„Éâ„É≠„ÉÉ„Éó„Åó„Å¶ÂâäÈô§„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆÂæå„ÄÅ„É©„Ç§„Éñ„É©„É™„Åã„ÇâToolbarItem„ÇíAllowed Toolbar Items„Å´‰∏ÄÂ∫¶„Éâ„É≠„ÉÉ„Éó„Åó„Å¶„ÄÅ„Åù„Åì„Åã„ÇâDefault Toolbar Items„Å´„Éâ„É≠„ÉÉ„Éó„Åó„Åæ„Åô„ÄÇAllowed Toolbar Items„ÅÆToolbar Item„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„ÄÅ„Ç§„É≥„Çπ„Éö„ÇØ„Çø„Éö„Éº„É≥„Åã„ÇâImage Name„Å´sidebar.right„ÇíË®≠ÂÆö„Åó„Åæ„Åô„ÄÇ
![„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà 2023-01-12 17.07.07.png](/images/6c78b72b9883c3/image3.webp)

„Å§„ÅÑ„Åß„Å´„ÄÅToolbar„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„ÅüÁä∂ÊÖã„Åß„ÄÅ„Ç§„É≥„Çπ„Éö„ÇØ„Çø„Åã„ÇâDisplay > Icon Only„ÇíË®≠ÂÆö„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇ

# 4. 3„Å§ÁõÆ„ÅÆPane„ÇíËøΩÂä†
„É©„Ç§„Éñ„É©„É™„Åã„ÇâView Controller„Çí1„Å§ËøΩÂä†„Åß„Éâ„É≠„ÉÉ„Éó„Åó„Åæ„Åô„ÄÇSplit View Controller Scene„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ctrl„Ç≠„Éº„ÇíÊäº„Åó„Å™„Åå„Çâ„Éâ„É©„ÉÉ„Ç∞„Åó„Å¶ËøΩÂä†„Åó„ÅüView Controller„ÅÆ‰∏ä„ÅßÊîæ„Åó„ÄÅsplit views„ÅÆ„Ç≥„Éç„ÇØ„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ

![„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà 2023-01-12 17.18.45.png](/images/6c78b72b9883c3/image4.webp)

„Åì„ÅÆ„Å®„Åç„ÄÅSplit View Controller Scene„ÅÆ‰∏ÄÁï™Âè≥Á´Ø„ÅÆNSSplitViewItem„ÅØHodling Priority„Çí260„Å´‰∏ä„Åí„Å¶„Åä„Åç„ÄÅUser Can Collapse„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ„ÇíÂÖ•„Çå„Å¶„Åä„Åç„Åæ„Åô„ÄÇ

Holding Priority„ÅØ„Çµ„Ç§„Ç∫„Çí‰øùÊåÅ„Åô„ÇãÂÑ™ÂÖàÂ∫¶„Åß„Åô„Åå„ÄÅ‰æã„Åà„Å∞„Ç¶„Ç§„É≥„Éâ„Ç¶„ÅÆÁ´Ø„ÇíÊåÅ„Å£„Å¶„Çµ„Ç§„Ç∫„ÇíÂ§ß„Åç„Åè„Åó„Åü„Å®„Åç„Å´„Çµ„Ç§„Éâ„Éê„Éº„ÇÑ„Ç§„É≥„Çπ„Éö„ÇØ„Çø„ÅåÂ§ß„Åç„Åè„Å™„Çã„Å®Â§â„Å™„ÅÆ„Åß„ÄÅ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Ç®„É™„Ç¢„ÅÆ„ÅøÊã°Â§ßÁ∏ÆÂ∞è„Åó„Å¶„Åª„Åó„ÅÑ„Åß„Åô„ÄÇÂ∑¶Âè≥„ÅÆHolding Priority„ÅØ260„Å™„Å©Âêå‰∏Ä„Å´Ë®≠ÂÆö„Åó„ÄÅ‰∏≠Â§Æ„Å†„Åë‰Ωé„ÅÑÂÄ§„Å´Ë®≠ÂÆö„Åó„Å¶„Åä„Åë„Å∞„Åù„ÅÆÊåôÂãï„ÇíÂÆüÁèæ„Åß„Åç„Åæ„Åô„ÄÇ

# 5. ÈÅ©ÂΩì„Å™„Éì„É•„Éº„ÇíÈÖçÁΩÆ„Åó„Å¶Autolayout„ÇíË®≠ÂÆö
View Controller Scene„ÅÆ3„Å§„Å´ÂØæ„Åó„Å¶ÈÅ©ÂΩì„Å™„Éì„É•„Éº„Çí„Åù„Çå„Åû„ÇåËºâ„Åõ„Å¶„ÄÅ‰∏ä‰∏ãÂ∑¶Âè≥0pt„ÅÆÂà∂Á¥Ñ„Çí‰ªò„Åë„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅØPlain Document Content Text View„Çí‰Ωø„ÅÑ„ÄÅÈÅ©ÂΩì„Å™„ÉÜ„Ç≠„Çπ„Éà„ÇíË®≠ÂÆö„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇ

„Åù„ÅÆÂæå„ÄÅsidebar„Å®inspector„Å´Ë©≤ÂΩì„Åô„Çãpane‰∏ä„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„Éì„É•„Éº„Å´„ÅØ„ÄÅ„Åù„Çå„Åû„Çå"width >= 250"„ÅÆÂπÖÂà∂Á¥Ñ„Çí‰ªò„Åë„ÄÅcontent area„Å´Ë©≤ÂΩì„Åô„Çãpane„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„Éì„É•„Éº„Å´„ÅØ"width >= 300"„ÅÆÂπÖÂà∂Á¥Ñ„Çí‰ªò„Åë„Å¶„Åä„Åç„Åæ„Åô(ÂÄ§„ÅØ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åî„Å®„Å´„Çà„Çä„Åæ„Åô)

NSSplitViewController„ÅÆ„Éâ„Ç≠„É•„É°„É≥„Éà„ÇíË™≠„ÇÄ„Å®„ÄÅSplitView„ÅÆ‰ªïÁµÑ„Åø„ÅØ„ÅÇ„Å£„Åü„Å®„Åó„Å¶„ÇÇ„ÄÅÂ≠ê„Éì„É•„Éº„ÅßAutolayoutÂà∂Á¥Ñ„ÇíË®≠ÂÆö„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„Å®Ë®Ä„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ

> To use a split view controller, you must use Auto Layout for the child views and to support animations that collapse and reveal child views. For example, if you design a layout that contains two views, a content area and an optional sidebar, you employ Auto Layout constraints to specify whether the content area shrinks or remains the same size when the sidebar becomes visible.
> (https://developer.apple.com/documentation/appkit/nssplitviewcontroller)


# 5. „Ç≥„Éº„Éâ„Åß„Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíË®≠ÂÆö
NSSplitViewController„ÅÆ„Çµ„Éñ„ÇØ„É©„Çπ„Çí‰ΩúÊàê„Åó„ÄÅStoryboard„ÅÆSplit View Controller Scene„ÅÆCustom Class„Å®„Åó„Å¶Ë®≠ÂÆö„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇinspector„ÅÆIBOutlet„ÇíÁπã„ÅÑ„Åß„Åä„Åç„Åæ„Åô„ÄÇ

```swift:SplitViewController.swift
import Cocoa

class SplitViewController: NSSplitViewController {

    @IBOutlet weak var inspectorSplitViewItem: NSSplitViewItem!

}

```

NSWindowController„ÅÆ„Çµ„Éñ„ÇØ„É©„Çπ„Çí‰ΩúÊàê„Åó„ÄÅStoryboard„ÅÆWindow Scene„ÅÆCustom Class„Å®„Åó„Å¶Ë®≠ÂÆö„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇ„Ç§„É≥„Çπ„Éö„ÇØ„Çø„Éà„Ç∞„É´Áî®„ÅÆToolbar Item„Åã„ÇâIBAction func toggleInspectorPane(sender:Any?)„ÇíÊé•Á∂ö„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇ

„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Áî®„ÅÆ„Éó„É≠„Ç≠„Ç∑„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÇíÁµåÁî±„Åó„Å§„Å§`isCollapsed`„Éó„É≠„Éë„ÉÜ„Ç£„Çí„Éà„Ç∞„É´„Åó„Åæ„Åô„ÄÇ


```swift:WindowController.swift
import Cocoa

class WindowController: NSWindowController {

    override func windowDidLoad() {
        super.windowDidLoad()
    
        // Implement this method to handle any initialization after your window controller's window has been loaded from its nib file.
    }

    @IBAction func toggleInspectorPane(_ sender: Any) {
        (contentViewController as! SplitViewController).inspectorSplitViewItem.animator().isCollapsed.toggle()
    }
    
}
```

# ÂÆåÊàêÔºÅ
„Åì„Çå„ÅßÁãô„Å£„Åü„Ç§„É≥„Çπ„Éö„ÇØ„Çø„ÅÆÊåôÂãï„ÅåÂÆüÁèæ„Åß„Åç„Åæ„Åó„Åü„ÄÇ„Çµ„É≥„Éó„É´„ÅÆgif„Çí‰∏ä„Åí„Å¶„Åä„Åç„Åæ„Åô„ÄÇ

![ÁîªÈù¢ÂèéÈå≤ 2023-01-12 18.05.07.gif](/images/6c78b72b9883c3/image5.gif)

Ê¶Ç„Å≠„Åì„ÅÆ„Çà„ÅÜ„Å™ÂΩ¢„ÅßÈÄ≤„ÇÅ„ÄÅ„ÅÇ„Å®„ÅØ„Åù„Çå„Åû„Çå„ÅÆ„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£„ÇíË™øÁØÄ„Åó„Åü„Çä„Å™„Å©„ÅßË¶ã„ÅüÁõÆ„Å™„Å©„ÇíÂ•Ω„Åç„Å™„Çà„ÅÜ„Å´Â§â„Åà„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

# „Åä„Åæ„Åë
‰ª•‰∏ã„ÅÆ„Ç≥„Éº„Éâ„ÅÆ„Çà„ÅÜ„Å´`.sidebarTrackingSeparator`„ÇíÊ¥ªÁî®„Åô„Çã„Å®„ÄÅ„Çµ„Ç§„Éâ„Éê„Éº„Éö„Éº„É≥ÂÜÖ„Å´NSToolbarItem„ÇíÁΩÆ„Åè„Åì„Å®„Åå„Åß„Åç„ÄÅ„Éà„Ç∞„É´„Åô„Çã„Å®„Çø„Ç§„Éà„É´„Éê„Éº„ÅÆÂ∑¶„Å´‰ΩçÁΩÆ„Åô„Çã„Çà„ÅÜ„Å™ÊåôÂãï„ÇíÂÆüÁèæ„Åß„Åç„Åæ„Åô„ÄÇ„Ç≥„Éº„Éâ„ÅßÊõ∏„ÅÑ„Å¶„Åæ„Åô„ÄÇ(„Åì„ÅÆ„Ç≥„Éº„ÉâÂçò‰Ωì„Åß„ÅØÂãï„Åç„Åæ„Åõ„Çì„ÄÇÂèÇËÄÉÁ®ãÂ∫¶„Å´„ÅäËÄÉ„Åà„Åè„Å†„Åï„ÅÑ)

```swift

extension NSToolbarItem.Identifier {
    static let leadingPaneToggleItem = NSToolbarItem.Identifier("jp.co.raiso.tweetboxproto4.toolbaritem.toggle-leading-pane")
    static let trailingPaneToggleItem = NSToolbarItem.Identifier("jp.co.raiso.tweetboxproto4.toolbaritem.toggle-trailing-pane")
}

extension ToolbarDelegate: NSToolbarDelegate {

    func toolbarDefaultItemIdentifiers(_ toolbar: NSToolbar) -> [NSToolbarItem.Identifier] {
        return [
            .leadingPaneToggleItem,
            .sidebarTrackingSeparator,
            .flexibleSpace,
            .trailingPaneToggleItem
        ]
    }

    func toolbarAllowedItemIdentifiers(_ toolbar: NSToolbar) -> [NSToolbarItem.Identifier] {
        return toolbarDefaultItemIdentifiers(toolbar)
    }

    func toolbar(_ toolbar: NSToolbar, itemForItemIdentifier itemIdentifier: NSToolbarItem.Identifier, willBeInsertedIntoToolbar flag: Bool) -> NSToolbarItem? {
        var toolbarItem: NSToolbarItem?

        switch itemIdentifier {
        case .leadingPaneToggleItem:
            let item = NSToolbarItem(itemIdentifier: itemIdentifier)
            item.image = NSImage(systemSymbolName: "sidebar.left", accessibilityDescription: nil)
            item.action = #selector(ViewController.toggleLeadingPane(sender:))
            toolbarItem = item

        case .trailingPaneToggleItem:
            let item = NSToolbarItem(itemIdentifier: itemIdentifier)
            item.image = NSImage(systemSymbolName: "sidebar.right", accessibilityDescription: nil)
            item.action = #selector(ViewController.toggleTrailingPane(sender:))
            toolbarItem = item

        case .toggleSidebar:
            let item = NSToolbarItem(itemIdentifier: .toggleSidebar)
            toolbarItem = item

        case .sidebarTrackingSeparator: //„Åì„Çå
            let item = NSToolbarItem(itemIdentifier: .sidebarTrackingSeparator)
            toolbarItem = item

        default:
            toolbarItem = nil

        }
        toolbarItem?.isBordered = true

        return toolbarItem
    }

}

```

![20230112-191406.png](/images/6c78b72b9883c3/image6.webp)
